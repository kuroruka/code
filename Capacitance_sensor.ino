#define THRESHOLD 10 // しきい値の設定
void setup()
{
Serial.begin(9600);
pinMode(8, OUTPUT); // 高抵抗1
pinMode(9, INPUT); // 高抵抗2,タッチ端子
pinMode(13, OUTPUT); // ビルトインLED
}
void loop() {
unsigned t = 0; // 時間計測用のカウンタ
// ①パルスをHIGHにする（1行） //////////////////////////////////////////
digitalWrite(8, HIGH);
//////////////////////////////////////////////////////////////////////
// ②立ち上がりまでの時間計測（1~3行） ///////////////////////////////////
while (digitalRead(9) != HIGH) t++;
//////////////////////////////////////////////////////////////////////
if (t > THRESHOLD) { // ③立ち上がり時間がしきい値を超えたら
digitalWrite(13, HIGH);
}
else {
digitalWrite(13, LOW);
}
// ④パルスをLOWにする（1行） //////////////////////////////////////////
digitalWrite(8, LOW);
//////////////////////////////////////////////////////////////////////
Serial.println(t); // 計測時間を表示
delay(5); //放電するまで待つ
}
